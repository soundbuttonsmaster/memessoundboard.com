import{loginUser as u}from"./api.Ba0nkDO7.js";import{setAuthToken as p,setUserData as g}from"./auth.BPmtC0_i.js";import"./hoisted.CLv4g-nk.js";const i=document.getElementById("loginForm"),o=document.getElementById("errorMessage"),n=document.getElementById("successMessage"),t=document.getElementById("submitBtn"),w=document.getElementById("passwordToggle"),d=document.getElementById("password");w?.addEventListener("click",()=>{const s=d.getAttribute("type")==="password"?"text":"password";d.setAttribute("type",s)});i?.addEventListener("submit",async s=>{s.preventDefault();const r=t.querySelector(".button-text"),a=t.querySelector(".button-loader");o.style.display="none",n.style.display="none",r.style.display="none",a.style.display="inline-block",t.disabled=!0;const l=new FormData(i),c=l.get("email"),m=l.get("password");try{const e=await u({email:c,password:m});if(e&&e.token){p(e.token),g(e.user),n.textContent="Login successful! Redirecting...",n.style.display="block";const y=new URLSearchParams(window.location.search).get("redirect")||"/profile";setTimeout(()=>{window.location.href=y},1e3)}else throw new Error("Invalid email or password")}catch(e){o.textContent=e.message||"Login failed. Please try again.",o.style.display="block"}finally{r.style.display="inline",a.style.display="none",t.disabled=!1}});
