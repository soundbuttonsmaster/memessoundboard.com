import{registerUser as w}from"./api.Ba0nkDO7.js";import{setAuthToken as f,setUserData as b}from"./auth.BPmtC0_i.js";import"./hoisted.CLv4g-nk.js";const i=document.getElementById("signupForm"),e=document.getElementById("errorMessage"),a=document.getElementById("successMessage"),n=document.getElementById("submitBtn"),E=document.getElementById("passwordToggle"),k=document.getElementById("confirmPasswordToggle"),c=document.getElementById("password"),m=document.getElementById("confirm_password");E?.addEventListener("click",()=>{const s=c.getAttribute("type")==="password"?"text":"password";c.setAttribute("type",s)});k?.addEventListener("click",()=>{const s=m.getAttribute("type")==="password"?"text":"password";m.setAttribute("type",s)});i?.addEventListener("submit",async s=>{s.preventDefault();const l=n.querySelector(".button-text"),d=n.querySelector(".button-loader");e.style.display="none",a.style.display="none";const o=new FormData(i),r=o.get("password"),u=o.get("confirm_password");if(r!==u){e.textContent="Passwords do not match",e.style.display="block";return}if(r.length<8){e.textContent="Password must be at least 8 characters long",e.style.display="block";return}l.style.display="none",d.style.display="inline-block",n.disabled=!0;const y=o.get("username"),g=o.get("email"),p=o.get("full_name");try{const t=await w({username:y,email:g,password:r,full_name:p||void 0});if(t&&t.token)f(t.token),b(t.user),a.textContent="Account created successfully! Redirecting...",a.style.display="block",setTimeout(()=>{window.location.href="/profile"},1e3);else throw new Error("Registration failed. Please try again.")}catch(t){e.textContent=t.message||"Registration failed. Please try again.",e.style.display="block"}finally{l.style.display="inline",d.style.display="none",n.disabled=!1}});
